<view class="container"><view class="search-box"><text class="iconfont icon-search"></text><input class="search-input" type="text" placeholder="搜索美食、食谱、达人" confirm-type="search" data-event-opts="{{[['confirm',[['handleSearch',['$event']]]],['input',[['__set_model',['','keyword','$event',[]]]]]]}}" value="{{keyword}}" bindconfirm="__e" bindinput="__e"/><block wx:if="{{keyword}}"><text data-event-opts="{{[['tap',[['clearKeyword',['$event']]]]]}}" class="iconfont icon-close" bindtap="__e"></text></block></view><block wx:if="{{$root.g0}}"><view class="history"><view class="header"><text class="title"><text class="iconfont icon-clock"></text>搜索历史</text><text data-event-opts="{{[['tap',[['clearHistory',['$event']]]]]}}" class="clear" bindtap="__e"><text class="iconfont icon-delete"></text>清除</text></view><view class="history-list"><block wx:for="{{searchHistory}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['useHistoryKeyword',['$0'],[[['searchHistory','',index]]]]]]]}}" class="history-item" bindtap="__e"><text class="iconfont icon-clock"></text><view class="keyword">{{item}}</view><view data-event-opts="{{[['tap',[['deleteHistory',[index]]]]]}}" class="delete-btn" catchtap="__e"><text class="iconfont icon-close"></text></view></view></block></view></view></block><block wx:if="{{!keyword}}"><view class="hot-section"><view class="section-header"><text class="title">热门搜索</text></view><view class="hot-list"><block wx:for="{{hotSearches}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['useHistoryKeyword',['$0'],[[['hotSearches','',index]]]]]]]}}" class="hot-item" bindtap="__e"><text class="{{['rank',(index<3)?'top':'']}}">{{index+1}}</text><text class="keyword">{{item}}</text></view></block></view></view></block><block wx:if="{{keyword}}"><scroll-view class="search-results" scroll-y="{{true}}" refresher-enabled="{{true}}" refresher-triggered="{{isRefreshing}}" data-event-opts="{{[['scrolltolower',[['loadMore',['$event']]]],['refresherrefresh',[['onRefresh',['$event']]]]]}}" bindscrolltolower="__e" bindrefresherrefresh="__e"><block wx:if="{{$root.g1}}"><view class="result-list"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="__i0__" wx:key="_id"><view data-event-opts="{{[['tap',[['goToDetail',['$0'],[[['searchResults','_id',item.$orig._id,'_id']]]]]]]}}" class="result-item" bindtap="__e"><image class="cover" src="{{item.$orig.cover||defaultImage}}" mode="aspectFill"></image><view class="info"><text class="title">{{item.$orig.title}}</text><text class="description">{{item.$orig.description}}</text><view class="meta"><view class="author"><image class="avatar" src="{{item.$orig.author.avatar||defaultAvatar}}" mode="aspectFill"></image><text class="nickname">{{item.$orig.author.nickname}}</text></view><text class="likes">{{item.m0+" 赞"}}</text></view></view></view></block></view></block><block wx:else><block wx:if="{{hasSearched}}"><view class="empty-result"><image class="empty-image" src="/static/images/empty-search.png" mode="aspectFit"></image><text class="empty-text">暂无相关内容</text></view></block></block><load-more vue-id="bda12f3c-1" status="{{loadMoreStatus}}" bind:__l="__l"></load-more></scroll-view></block></view>